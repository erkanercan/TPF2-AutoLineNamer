<div id="container">

<div id="product">

<div id="dokuwiki__header">

<div class="headings group">

# [<img
src="https://www.transportfever2.com/wiki/lib/tpl/transportfever/images/logo.png"
width="432" height="90" />](https://wiki.transportfever2.com/wiki/doku.php?id=start "Logo")

</div>

<div class="tools group">

<div id="dokuwiki__sitetools">

<div style="font-size: .875em; margin-top:10px;">

[![Urban
Games](https://www.transportfever2.com/wiki/lib/tpl/transportfever/images/logo_urban_games_wiki_100.png)](https://urbangames.com)

</div>

</div>

</div>

<div class="breadcrumbs">

<div class="youarehere">

[Transport Fever 2 Website](https://transportfever2.com/) \|
<span class="bchead">You are here:
</span><span class="home"><a href="https://wiki.transportfever2.com/wiki/doku.php?id=start"
class="wikilink1" title="start">Start</a></span> »
<a href="https://wiki.transportfever2.com/wiki/doku.php?id=modding"
class="wikilink1" title="modding">Modding</a> »
<span class="curid"><a href="https://wiki.transportfever2.com/wiki/doku.php?id=modding:api"
class="wikilink1" title="modding:api">API Reference</a></span>

</div>

</div>

</div>

<div id="product_logo">

</div>

<div id="product_name">

</div>

<div id="product_description">

</div>

</div>

<div id="main">

<div id="navigation">

  

# API Reference

- [Index](../index.html)

## Examples

- [base_mod_postRunFn.lua](base_mod_postRunFn.lua.html)
- [build_street.lua](build_street.lua.html)
- **construction_postRunFn.lua**
- [replace_street.lua](replace_street.lua.html)

## Modules

- [api.cmd](../modules/api.cmd.html)
- [api.engine](../modules/api.engine.html)
- [api.gui](../modules/api.gui.html)
- [api.res](../modules/api.res.html)
- [api.type](../modules/api.type.html)
- [api.util](../modules/api.util.html)
- [app](../modules/app.html)

## Topics

- [Examples](../topics/examples.md.html)
- [Lua states](../topics/states.md.html)
- [Types](../topics/types.md.html)

</div>

<div id="content">

## construction_postRunFn.lua


    function data()
    return {
      -- info
      -- categories
      -- options
      -- runFn

      postRunFn = function(settings, params)
            local con = api.type.ConstructionDesc.new()

            con.type = api.type.enum.ConstructionType.ASSET_DEFAULT
            con.description.name = _("My Construction")
            con.description.description = _("Build your construction")

            local templ = api.type.ConstructionTemplate.new()

        templ.availability = api.type.MetadataMap.Availability.new()
          templ.availability.yearFrom = 1825
            templ.availability.yearTo = 1925

            templ.desc.name = con.description.name
            templ.desc.description = con.description.description

            local dyn = api.type.DynamicConstructionTemplate.new()

            local par1 = api.type.ScriptParam.new()
            par1.key = "key_1"
            par1.name ="Key 1"
            par1.tooltip = "Key 1"
            par1.values = {"1", "2"}

            dyn.params[1] = par1

            templ.data = dyn

            con.constructionTemplates[1] = templ

            con.availability.yearFrom = 1825
            con.categories = { "misc" }
            con.order = 100
            con.skipCollision = false
            con.autoRemovable = false
            con.fileName = "myCon"
            con.updateScript.fileName = "construction/cons.updateFn"
            con.updateScript.params = {
                param1 = "param1",
            }
            con.preProcessScript.fileName = "construction/cons.preProcessFn"
            con.preProcessScript.params = {
                param1 = "param1",
            }
            con.upgradeScript.fileName = "construction/cons.upgradeFn"
            con.upgradeScript.params = {
                param1 = "param1",
            }
            con.createTemplateScript.fileName = "construction/cons.createTemplateFn"
            con.createTemplateScript.params = {
                param1 = "param1",
            }

            api.res.constructionRep.add("myCon", con, true)

            local con = api.res.constructionRep.get(api.res.constructionRep.find("myCon"))
            local par1 = api.type.ScriptParam.new()
            par1.key = "key_2"
            par1.name = "Key 2"
            par1.tooltip = "Key 2 (tooltip)"
            par1.values = {"1", "2", "3"}

            local templ = api.type.ConstructionTemplate.new()
            local dyn = api.type.DynamicConstructionTemplate.new()
            dyn.params[1] = par1

            templ.desc.name = _("My Construction")

            templ.data = dyn

            con.constructionTemplates[1] = templ
      end
    }
    end

</div>

</div>

<div id="about">

*generated by [LDoc 1.4.3](http://github.com/stevedonovan/LDoc)* *Last
updated 2023-04-18 15:10:38*

</div>

</div>
