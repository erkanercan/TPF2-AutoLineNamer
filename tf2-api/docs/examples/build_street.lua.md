<div id="container">

<div id="product">

<div id="dokuwiki__header">

<div class="headings group">

# [<img
src="https://www.transportfever2.com/wiki/lib/tpl/transportfever/images/logo.png"
width="432" height="90" />](https://wiki.transportfever2.com/wiki/doku.php?id=start "Logo")

</div>

<div class="tools group">

<div id="dokuwiki__sitetools">

<div style="font-size: .875em; margin-top:10px;">

[![Urban
Games](https://www.transportfever2.com/wiki/lib/tpl/transportfever/images/logo_urban_games_wiki_100.png)](https://urbangames.com)

</div>

</div>

</div>

<div class="breadcrumbs">

<div class="youarehere">

[Transport Fever 2 Website](https://transportfever2.com/) \|
<span class="bchead">You are here:
</span><span class="home"><a href="https://wiki.transportfever2.com/wiki/doku.php?id=start"
class="wikilink1" title="start">Start</a></span> »
<a href="https://wiki.transportfever2.com/wiki/doku.php?id=modding"
class="wikilink1" title="modding">Modding</a> »
<span class="curid"><a href="https://wiki.transportfever2.com/wiki/doku.php?id=modding:api"
class="wikilink1" title="modding:api">API Reference</a></span>

</div>

</div>

</div>

<div id="product_logo">

</div>

<div id="product_name">

</div>

<div id="product_description">

</div>

</div>

<div id="main">

<div id="navigation">

  

# API Reference

- [Index](../index.html)

## Examples

- [base_mod_postRunFn.lua](base_mod_postRunFn.lua.html)
- **build_street.lua**
- [construction_postRunFn.lua](construction_postRunFn.lua.html)
- [replace_street.lua](replace_street.lua.html)

## Modules

- [api.cmd](../modules/api.cmd.html)
- [api.engine](../modules/api.engine.html)
- [api.gui](../modules/api.gui.html)
- [api.res](../modules/api.res.html)
- [api.type](../modules/api.type.html)
- [api.util](../modules/api.util.html)
- [app](../modules/app.html)

## Topics

- [Examples](../topics/examples.md.html)
- [Lua states](../topics/states.md.html)
- [Types](../topics/types.md.html)

</div>

<div id="content">

## build_street.lua


    proposal = api.type.SimpleProposal.new() -- api.type.SimpleProposal

    edge0 = api.type.SegmentAndEntity.new()
    edge0.entity = -1

    edge0.comp.node0 = -3
    edge0.comp.node1 = -4
    edge0.comp.tangent0 = api.type.Vec3f.new(40.0, 0.0, 0.0)
    edge0.comp.tangent1 = api.type.Vec3f.new(40.0, 0.0, 0.0)
    edge0.comp.type = 0
    edge0.comp.typeIndex = 0
    edge0.comp.objects = {{ -1, 1 }} --
    edge0.type = 0
    edge0.streetEdge = api.type.BaseEdgeStreet.new()
    edge0.streetEdge.streetType = api.res.streetTypeRep.find("standard/country_small_new.lua")

    edge1 = api.type.SegmentAndEntity.new()
    edge1.entity = -2

    edge1.comp.node0 = -4
    edge1.comp.node1 = -5
    edge1.comp.tangent0 = api.type.Vec3f.new(40.0, 0.0, 0.0)
    edge1.comp.tangent1 = api.type.Vec3f.new(40.0, 0.0, 0.0)
    edge1.comp.type = 0
    edge1.comp.typeIndex = 0
    --edge1.comp.objects = {{ -1, 1 }}
    edge1.type = 0
    edge1.streetEdge = api.type.BaseEdgeStreet.new()
    edge1.streetEdge.streetType = api.res.streetTypeRep.find("standard/country_small_new.lua")

    proposal.streetProposal.edgesToAdd[1] = edge0
    proposal.streetProposal.edgesToAdd[2] = edge1

    eo = api.type.SimpleStreetProposal.EdgeObject.new()
    eo.left = true
    eo.model = "street/signal_waypoint.mdl"
    eo.playerEntity = game.interface.getPlayer()
    eo.oneWay = false
    eo.param = 0.5
    eo.edgeEntity = -1
    eo.name = "MY Beautiful Signal"

    proposal.streetProposal.edgeObjectsToAdd[1] = eo

    node0 = api.type.NodeAndEntity.new()
    node1 = api.type.NodeAndEntity.new()
    node2 = api.type.NodeAndEntity.new()

    node0.entity = -3
    node0.comp.position = api.type.Vec3f.new(0.0, 0.0, 0.0)

    node1.entity = -4
    node1.comp.position = api.type.Vec3f.new(40.0, 0.0, 0.0)

    node2.entity = -5
    node2.comp.position = api.type.Vec3f.new(80.0, 0.0, 0.0)

    proposal.streetProposal.nodesToAdd[1] = node0
    proposal.streetProposal.nodesToAdd[2] = node1
    proposal.streetProposal.nodesToAdd[3] = node2

    callback = function(res, success)
        print(res)
        --for _, v in pairs(res.entities) do print(v) end
     print(success)
    end

    cmd = api.cmd.make.buildProposal(proposal, nil, false)

    api.cmd.sendCommand(cmd, callback)

</div>

</div>

<div id="about">

*generated by [LDoc 1.4.3](http://github.com/stevedonovan/LDoc)* *Last
updated 2023-04-18 15:10:38*

</div>

</div>
