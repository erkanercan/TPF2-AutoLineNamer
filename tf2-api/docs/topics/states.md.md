<div id="container">

<div id="product">

<div id="dokuwiki__header">

<div class="headings group">

# [<img
src="https://www.transportfever2.com/wiki/lib/tpl/transportfever/images/logo.png"
width="432" height="90" />](https://wiki.transportfever2.com/wiki/doku.php?id=start "Logo")

</div>

<div class="tools group">

<div id="dokuwiki__sitetools">

<div style="font-size: .875em; margin-top:10px;">

[![Urban
Games](https://www.transportfever2.com/wiki/lib/tpl/transportfever/images/logo_urban_games_wiki_100.png)](https://urbangames.com)

</div>

</div>

</div>

<div class="breadcrumbs">

<div class="youarehere">

[Transport Fever 2 Website](https://transportfever2.com/) \|
<span class="bchead">You are here:
</span><span class="home"><a href="https://wiki.transportfever2.com/wiki/doku.php?id=start"
class="wikilink1" title="start">Start</a></span> »
<a href="https://wiki.transportfever2.com/wiki/doku.php?id=modding"
class="wikilink1" title="modding">Modding</a> »
<span class="curid"><a href="https://wiki.transportfever2.com/wiki/doku.php?id=modding:api"
class="wikilink1" title="modding:api">API Reference</a></span>

</div>

</div>

</div>

<div id="product_logo">

</div>

<div id="product_name">

</div>

<div id="product_description">

</div>

</div>

<div id="main">

<div id="navigation">

  

# API Reference

- [Index](../index.html)

## Contents

- [GUI State](states.md.html#GUI_State)
- [Engine State](states.md.html#Engine_State)
- [Console State](states.md.html#Console_State)
- [postRunFn State](states.md.html#postRunFn_State)
- [Other States](states.md.html#Other_States)

## Topics

- [Examples](examples.md.html)
- **Lua states**
- [Types](types.md.html)

## Modules

- [api.cmd](../modules/api.cmd.html)
- [api.engine](../modules/api.engine.html)
- [api.gui](../modules/api.gui.html)
- [api.res](../modules/api.res.html)
- [api.type](../modules/api.type.html)
- [api.util](../modules/api.util.html)
- [app](../modules/app.html)

## Examples

- [base_mod_postRunFn.lua](../examples/base_mod_postRunFn.lua.html)
- [build_street.lua](../examples/build_street.lua.html)
- [construction_postRunFn.lua](../examples/construction_postRunFn.lua.html)
- [replace_street.lua](../examples/replace_street.lua.html)

</div>

<div id="content">

# Lua states

Before and during the game, many different and completely isolated lua
states are created and destroyed.

<span id="GUI_State"></span>

## GUI State

This state has access to all GUI functions, as well as all engine
utilities and resources. Commands sent from the GUI will take time to
take effect, and the callback will be called many frames after the
command has been sent (the command has to first reach and be executed by
the engine, which then need to notify the GUI back).

A ".script" will be partially run within this state, in particular all
GUI functions run in this state.

<span id="Engine_State"></span>

## Engine State

This is the state where the simulation takes place. The simulation runs
an update 5 times per seconds on average. In this state all commands
take effect immediately.

A ".script" will be partially run within this state, in particular all
non-GUI functions run in this state.

<span id="Console_State"></span>

## Console State

This state is created at the start of the application and persists until
the application is closed. For all intents and purposes it is very
similar to the GUI state, and has access to all
[app](../modules/app.html#) and api modules.

<span id="postRunFn_State"></span>

## postRunFn State

A special state is created just before the game is launched, and runs a
`postRunFn` for each installed and enabled mod. This state is the only
one to have write access to the in game resources. Once this state is
done with the modifications, the resources will be constant and
unmodifiable for the remainder of the game.

<span id="Other_States"></span>

## Other States

During the loading of the game, many different states are created in
order to load all resources in parallel, These "micro states" will run
the "runFn" for each mod to ensure modifiers and configurations are
applied before loading resources.

</div>

</div>

<div id="about">

*generated by [LDoc 1.4.3](http://github.com/stevedonovan/LDoc)* *Last
updated 2023-04-18 15:10:38*

</div>

</div>
